(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"04e9":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loginPage"},[t._m(0),s("div",{staticClass:"inputBox"},[s("div",{staticClass:"label"},[t._v("username")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"请使用邮箱作为账号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),s("div",{staticClass:"label"},[t._v("password")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),s("div",{staticClass:"theme-button",on:{click:t.login}},[t._v("Get Started --\x3e")])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"triangle"}),s("div",{staticClass:"lineOne"},[t._v("Welcome,")]),s("div",{staticClass:"lineTwo"},[t._v("sign in to continue")])])}],o=s("b775"),i={data:function(){return{username:"",password:""}},created:function(){},methods:{login:function(){var t=this,e=this.username,s=this.password;if(e&&s){var n=new o["a"].User;n.setUsername(e),n.setPassword(s),n.setEmail(e),n.signUp().then(function(e){t.$Message.success("注册成功 登录成功"),t.$router.push({path:"/randomFood"})},function(n){t._logError("error",n),125===n.code?t.$Message.error("请填写正确的邮箱"):203===n.code?o["a"].User.loginWithEmail(e,s).then(function(e){t.$Message.success("登陆成功"),t.$router.push({path:"/randomFood"})},function(e){t._logError("loginError",e),210===e.code?t.$Message.error("账号名密码不正确"):t.$Message.error(JSON.stringify(e))}):t.$Message.error(JSON.stringify(n))})}else this.$Message.error("请输入用户名和密码")},_logError:function(t,e){console.log(t),console.log(e),console.log("".concat(t,".code")),console.log(e.code)}}},a=i,c=(s("d8dc"),s("2877")),u=Object(c["a"])(a,n,r,!1,null,null,null);e["default"]=u.exports},"0a49":function(t,e,s){var n=s("9b43"),r=s("626a"),o=s("4bf8"),i=s("9def"),a=s("cd1c");t.exports=function(t,e){var s=1==t,c=2==t,u=3==t,l=4==t,d=6==t,f=5==t||d,v=e||a;return function(e,a,m){for(var h,p,g=o(e),_=r(g),x=n(a,m,3),C=i(_.length),b=0,w=s?v(e,C):c?v(e,0):void 0;C>b;b++)if((f||b in _)&&(h=_[b],p=x(h,b,g),t))if(s)w[b]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return b;case 2:w.push(h)}else if(l)return!1;return d?-1:u||l?l:w}}},1029:function(t,e,s){},1169:function(t,e,s){var n=s("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"38a2":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addFoodPage"},[t._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"label"},[t._v("食物名称")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.foodName,expression:"foodName"}],attrs:{type:"text"},domProps:{value:t.foodName},on:{input:function(e){e.target.composing||(t.foodName=e.target.value)}}})]),s("div",{staticClass:"theme-button",on:{click:t.onClickAdd}},[t._v("添加 --\x3e")]),s("div",{staticClass:"theme-button",on:{click:t.onClickSelect}},[t._v("去选择吃的啦 --\x3e")])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"triangle"}),s("div",{staticClass:"lineTwo"},[t._v("添加一个你喜欢的食物")])])}],o=s("b775"),i={created:function(){this._getUser()},data:function(){return{currentUser:null,foodName:""}},methods:{_getUser:function(){this.currentUser=o["a"].User.current()},onClickSelect:function(){this.$router.push({path:"/randomFood"})},onClickAdd:function(){var t=this,e=this.currentUser,s=this.foodName;if(s){var n=o["a"].Object.extend("Food"),r=new n;r.set("foodName",s),r.set("user",e),r.save().then(function(e){t.$Message.success("添加成功"),t.foodName=""},function(e){t.$Message.error(JSON.stringify(e))})}else this.$Message.error("请填写食物名称")}}},a=i,c=(s("484f"),s("2877")),u=Object(c["a"])(a,n,r,!1,null,"0323d503",null);e["default"]=u.exports},"391b":function(t,e,s){},"3edf":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view")],1)},r=[],o={},i=o,a=s("2877"),c=Object(a["a"])(i,n,r,!1,null,null,null);e["default"]=c.exports},"484f":function(t,e,s){"use strict";var n=s("391b"),r=s.n(n);r.a},7514:function(t,e,s){"use strict";var n=s("5ca1"),r=s("0a49")(5),o="find",i=!0;o in[]&&Array(1)[o](function(){i=!1}),n(n.P+n.F*i,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(o)},bde5:function(t,e,s){},cd1c:function(t,e,s){var n=s("e853");t.exports=function(t,e){return new(n(t))(e)}},cf42:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"randomFoodPage"},[s("div",{staticClass:"header"},[s("div",{staticClass:"triangle"}),s("div",{staticClass:"lineTwo"},[t._v(t._s(t.text))])]),t.notEnough?s("div",{staticClass:"emptyBox"},[s("img",{staticClass:"emptyImg",attrs:{src:"https://cdn.nlark.com/yuque/0/2019/png/138421/1562572107779-955a70e2-b57e-40b4-8e43-535bd4b4e766.png",alt:""}})]):[s("div",{staticClass:"randomBox"},[s("div",{staticClass:"label"},[t._v("今日菜品: ")]),s("div",{staticClass:"randomInput"},[t._v(" "+t._s(t.resultText)+" ")]),s("div",{staticClass:"theme-button",on:{click:t.onClickRandom}},[t._v(t._s(t.btnText))])])],s("div",{staticClass:"theme-button",on:{click:t.onClickAdd}},[t._v("去添加 --\x3e")])],2)},r=[],o=(s("7514"),s("b775")),i={data:function(){return{currentUser:null,foodList:[],selectedIndex:0,notEnough:!0,text:"你需要先添加三个以上的食物, 才能够帮你挑选",resultText:"快快点击开始挑选叭~ ",press:!1,timer:null}},computed:{btnText:function(){return this.press?"选择 --\x3e":"开始挑选 Go --\x3e"}},created:function(){this._getUser(),this.$nextTick(this._getFoods())},beforeDestroy:function(){clearTimeout(this.timer),this.timer=null},methods:{onClickRandom:function(){var t=this;this.press=!this.press,this.press?this.timer=setInterval(function(){var e=t._getRandomIndex();t.resultText=t.foodList[e]},30):(this.resultText=this.foodList[this.selectedIndex],this.selectedIndex=this._getRandomIndex(),clearTimeout(this.timer),this.timer=null)},onClickAdd:function(){this.$router.push({path:"/addFood"})},_getRandomIndex:function(){return Math.floor(Math.random()*this.foodList.length)},_getUser:function(){this.currentUser=o["a"].User.current()},_getFoods:function(){var t=this,e=new o["a"].Query("Food");e.equalTo("user",this.currentUser),e.find().then(function(e){console.log(e),e.length>2&&(t.notEnough=!1,t.text="开始解决世界性大难题叭",t.foodList=e.map(function(t){return t.attributes.foodName}),t.selectedIndex=t._getRandomIndex())},function(e){t.$Message.error(e)})}}},a=i,c=(s("dd01"),s("2877")),u=Object(c["a"])(a,n,r,!1,null,"16a2bec8",null);e["default"]=u.exports},d8dc:function(t,e,s){"use strict";var n=s("1029"),r=s.n(n);r.a},dd01:function(t,e,s){"use strict";var n=s("bde5"),r=s.n(n);r.a},e853:function(t,e,s){var n=s("d3f4"),r=s("1169"),o=s("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=user.e2012336.js.map